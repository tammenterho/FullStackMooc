{"ast":null,"code":"\"use strict\";\n\nconst express = require('express');\nconst pluralize = require('pluralize');\nconst delay = require('./delay');\nmodule.exports = opts => {\n  const router = express.Router();\n  router.use(delay); // Rewrite URL (/:resource/:id/:nested -> /:nested) and request query\n\n  function get(req, res, next) {\n    const prop = pluralize.singular(req.params.resource);\n    req.query[`${prop}${opts.foreignKeySuffix}`] = req.params.id;\n    req.url = `/${req.params.nested}`;\n    next();\n  } // Rewrite URL (/:resource/:id/:nested -> /:nested) and request body\n\n  function post(req, res, next) {\n    const prop = pluralize.singular(req.params.resource);\n    req.body[`${prop}${opts.foreignKeySuffix}`] = req.params.id;\n    req.url = `/${req.params.nested}`;\n    next();\n  }\n  return router.get('/:resource/:id/:nested', get).post('/:resource/:id/:nested', post);\n};","map":{"version":3,"names":["express","require","pluralize","delay","module","exports","opts","router","Router","use","get","req","res","next","prop","singular","params","resource","query","foreignKeySuffix","id","url","nested","post","body"],"sources":["C:/FullStackMooc/osa6/redux-anecdotes/node_modules/json-server/lib/server/router/nested.js"],"sourcesContent":["\"use strict\";\n\nconst express = require('express');\n\nconst pluralize = require('pluralize');\n\nconst delay = require('./delay');\n\nmodule.exports = opts => {\n  const router = express.Router();\n  router.use(delay); // Rewrite URL (/:resource/:id/:nested -> /:nested) and request query\n\n  function get(req, res, next) {\n    const prop = pluralize.singular(req.params.resource);\n    req.query[`${prop}${opts.foreignKeySuffix}`] = req.params.id;\n    req.url = `/${req.params.nested}`;\n    next();\n  } // Rewrite URL (/:resource/:id/:nested -> /:nested) and request body\n\n\n  function post(req, res, next) {\n    const prop = pluralize.singular(req.params.resource);\n    req.body[`${prop}${opts.foreignKeySuffix}`] = req.params.id;\n    req.url = `/${req.params.nested}`;\n    next();\n  }\n\n  return router.get('/:resource/:id/:nested', get).post('/:resource/:id/:nested', post);\n};"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAElC,MAAMC,SAAS,GAAGD,OAAO,CAAC,WAAW,CAAC;AAEtC,MAAME,KAAK,GAAGF,OAAO,CAAC,SAAS,CAAC;AAEhCG,MAAM,CAACC,OAAO,GAAGC,IAAI,IAAI;EACvB,MAAMC,MAAM,GAAGP,OAAO,CAACQ,MAAM,EAAE;EAC/BD,MAAM,CAACE,GAAG,CAACN,KAAK,CAAC,CAAC,CAAC;;EAEnB,SAASO,GAAG,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC3B,MAAMC,IAAI,GAAGZ,SAAS,CAACa,QAAQ,CAACJ,GAAG,CAACK,MAAM,CAACC,QAAQ,CAAC;IACpDN,GAAG,CAACO,KAAK,CAAE,GAAEJ,IAAK,GAAER,IAAI,CAACa,gBAAiB,EAAC,CAAC,GAAGR,GAAG,CAACK,MAAM,CAACI,EAAE;IAC5DT,GAAG,CAACU,GAAG,GAAI,IAAGV,GAAG,CAACK,MAAM,CAACM,MAAO,EAAC;IACjCT,IAAI,EAAE;EACR,CAAC,CAAC;;EAGF,SAASU,IAAI,CAACZ,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC5B,MAAMC,IAAI,GAAGZ,SAAS,CAACa,QAAQ,CAACJ,GAAG,CAACK,MAAM,CAACC,QAAQ,CAAC;IACpDN,GAAG,CAACa,IAAI,CAAE,GAAEV,IAAK,GAAER,IAAI,CAACa,gBAAiB,EAAC,CAAC,GAAGR,GAAG,CAACK,MAAM,CAACI,EAAE;IAC3DT,GAAG,CAACU,GAAG,GAAI,IAAGV,GAAG,CAACK,MAAM,CAACM,MAAO,EAAC;IACjCT,IAAI,EAAE;EACR;EAEA,OAAON,MAAM,CAACG,GAAG,CAAC,wBAAwB,EAAEA,GAAG,CAAC,CAACa,IAAI,CAAC,wBAAwB,EAAEA,IAAI,CAAC;AACvF,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}