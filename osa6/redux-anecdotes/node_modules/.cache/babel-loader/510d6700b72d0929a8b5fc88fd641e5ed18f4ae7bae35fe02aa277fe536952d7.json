{"ast":null,"code":"\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nconst express = require('express');\nconst _ = require('lodash');\nconst pluralize = require('pluralize');\nconst write = require('./write');\nconst getFullURL = require('./get-full-url');\nconst utils = require('../utils');\nconst delay = require('./delay');\nmodule.exports = (db, name, opts) => {\n  // Create router\n  const router = express.Router();\n  router.use(delay); // Embed function used in GET /name and GET /name/id\n\n  function embed(resource, e) {\n    e && [].concat(e).forEach(externalResource => {\n      if (db.get(externalResource).value) {\n        const query = {};\n        const singularResource = pluralize.singular(name);\n        query[`${singularResource}${opts.foreignKeySuffix}`] = resource.id;\n        resource[externalResource] = db.get(externalResource).filter(query).value();\n      }\n    });\n  } // Expand function used in GET /name and GET /name/id\n\n  function expand(resource, e) {\n    e && [].concat(e).forEach(innerResource => {\n      const plural = pluralize(innerResource);\n      if (db.get(plural).value()) {\n        const prop = `${innerResource}${opts.foreignKeySuffix}`;\n        resource[innerResource] = db.get(plural).getById(resource[prop]).value();\n      }\n    });\n  } // GET /name\n  // GET /name?q=\n  // GET /name?attr=&attr=\n  // GET /name?_end=&\n  // GET /name?_start=&_end=&\n  // GET /name?_embed=&_expand=\n\n  function list(req, res, next) {\n    // Resource chain\n    let chain = db.get(name); // Remove q, _start, _end, ... from req.query to avoid filtering using those\n    // parameters\n\n    let q = req.query.q;\n    let _start = req.query._start;\n    let _end = req.query._end;\n    let _page = req.query._page;\n    const _sort = req.query._sort;\n    const _order = req.query._order;\n    let _limit = req.query._limit;\n    const _embed = req.query._embed;\n    const _expand = req.query._expand;\n    delete req.query.q;\n    delete req.query._start;\n    delete req.query._end;\n    delete req.query._sort;\n    delete req.query._order;\n    delete req.query._limit;\n    delete req.query._embed;\n    delete req.query._expand; // Automatically delete query parameters that can't be found\n    // in the database\n\n    Object.keys(req.query).forEach(query => {\n      const arr = db.get(name).value();\n      for (const i in arr) {\n        if (_.has(arr[i], query) || query === 'callback' || query === '_' || /_lte$/.test(query) || /_gte$/.test(query) || /_ne$/.test(query) || /_like$/.test(query)) return;\n      }\n      delete req.query[query];\n    });\n    if (q) {\n      // Full-text search\n      if (Array.isArray(q)) {\n        q = q[0];\n      }\n      q = q.toLowerCase();\n      chain = chain.filter(obj => {\n        for (const key in obj) {\n          const value = obj[key];\n          if (db._.deepQuery(value, q)) {\n            return true;\n          }\n        }\n        return false;\n      });\n    }\n    Object.keys(req.query).forEach(key => {\n      // Don't take into account JSONP query parameters\n      // jQuery adds a '_' query parameter too\n      if (key !== 'callback' && key !== '_') {\n        // Always use an array, in case req.query is an array\n        const arr = [].concat(req.query[key]);\n        const isDifferent = /_ne$/.test(key);\n        const isRange = /_lte$/.test(key) || /_gte$/.test(key);\n        const isLike = /_like$/.test(key);\n        const path = key.replace(/(_lte|_gte|_ne|_like)$/, '');\n        chain = chain.filter(element => {\n          return arr.map(function (value) {\n            // get item value based on path\n            // i.e post.title -> 'foo'\n            const elementValue = _.get(element, path); // Prevent toString() failing on undefined or null values\n\n            if (elementValue === undefined || elementValue === null) {\n              return undefined;\n            }\n            if (isRange) {\n              const isLowerThan = /_gte$/.test(key);\n              return isLowerThan ? value <= elementValue : value >= elementValue;\n            } else if (isDifferent) {\n              return value !== elementValue.toString();\n            } else if (isLike) {\n              return new RegExp(value, 'i').test(elementValue.toString());\n            } else {\n              return value === elementValue.toString();\n            }\n          }).reduce((a, b) => isDifferent ? a && b : a || b);\n        });\n      }\n    }); // Sort\n\n    if (_sort) {\n      const _sortSet = _sort.split(',');\n      const _orderSet = (_order || '').split(',').map(s => s.toLowerCase());\n      chain = chain.orderBy(_sortSet, _orderSet);\n    } // Slice result\n\n    if (_end || _limit || _page) {\n      res.setHeader('X-Total-Count', chain.size());\n      res.setHeader('Access-Control-Expose-Headers', `X-Total-Count${_page ? ', Link' : ''}`);\n    }\n    if (_page) {\n      _page = parseInt(_page, 10);\n      _page = _page >= 1 ? _page : 1;\n      _limit = parseInt(_limit, 10) || 10;\n      const page = utils.getPage(chain.value(), _page, _limit);\n      const links = {};\n      const fullURL = getFullURL(req);\n      if (page.first) {\n        links.first = fullURL.replace(`page=${page.current}`, `page=${page.first}`);\n      }\n      if (page.prev) {\n        links.prev = fullURL.replace(`page=${page.current}`, `page=${page.prev}`);\n      }\n      if (page.next) {\n        links.next = fullURL.replace(`page=${page.current}`, `page=${page.next}`);\n      }\n      if (page.last) {\n        links.last = fullURL.replace(`page=${page.current}`, `page=${page.last}`);\n      }\n      res.links(links);\n      chain = _.chain(page.items);\n    } else if (_end) {\n      _start = parseInt(_start, 10) || 0;\n      _end = parseInt(_end, 10);\n      chain = chain.slice(_start, _end);\n    } else if (_limit) {\n      _start = parseInt(_start, 10) || 0;\n      _limit = parseInt(_limit, 10);\n      chain = chain.slice(_start, _start + _limit);\n    } // embed and expand\n\n    chain = chain.cloneDeep().forEach(function (element) {\n      embed(element, _embed);\n      expand(element, _expand);\n    });\n    res.locals.data = chain.value();\n    next();\n  } // GET /name/:id\n  // GET /name/:id?_embed=&_expand\n\n  function show(req, res, next) {\n    const _embed = req.query._embed;\n    const _expand = req.query._expand;\n    const resource = db.get(name).getById(req.params.id).value();\n    if (resource) {\n      // Clone resource to avoid making changes to the underlying object\n      const clone = _.cloneDeep(resource); // Embed other resources based on resource id\n      // /posts/1?_embed=comments\n\n      embed(clone, _embed); // Expand inner resources based on id\n      // /posts/1?_expand=user\n\n      expand(clone, _expand);\n      res.locals.data = clone;\n    }\n    next();\n  } // POST /name\n\n  function create(req, res, next) {\n    let resource;\n    if (opts._isFake) {\n      const id = db.get(name).createId().value();\n      resource = _objectSpread(_objectSpread({}, req.body), {}, {\n        id\n      });\n    } else {\n      resource = db.get(name).insert(req.body).value();\n    }\n    res.setHeader('Access-Control-Expose-Headers', 'Location');\n    res.location(`${getFullURL(req)}/${resource.id}`);\n    res.status(201);\n    res.locals.data = resource;\n    next();\n  } // PUT /name/:id\n  // PATCH /name/:id\n\n  function update(req, res, next) {\n    const id = req.params.id;\n    let resource;\n    if (opts._isFake) {\n      resource = db.get(name).getById(id).value();\n      if (req.method === 'PATCH') {\n        resource = _objectSpread(_objectSpread({}, resource), req.body);\n      } else {\n        resource = _objectSpread(_objectSpread({}, req.body), {}, {\n          id: resource.id\n        });\n      }\n    } else {\n      let chain = db.get(name);\n      chain = req.method === 'PATCH' ? chain.updateById(id, req.body) : chain.replaceById(id, req.body);\n      resource = chain.value();\n    }\n    if (resource) {\n      res.locals.data = resource;\n    }\n    next();\n  } // DELETE /name/:id\n\n  function destroy(req, res, next) {\n    let resource;\n    if (opts._isFake) {\n      resource = db.get(name).value();\n    } else {\n      resource = db.get(name).removeById(req.params.id).value(); // Remove dependents documents\n\n      const removable = db._.getRemovable(db.getState(), opts);\n      removable.forEach(item => {\n        db.get(item.name).removeById(item.id).value();\n      });\n    }\n    if (resource) {\n      res.locals.data = {};\n    }\n    next();\n  }\n  const w = write(db);\n  router.route('/').get(list).post(create, w);\n  router.route('/:id').get(show).put(update, w).patch(update, w).delete(destroy, w);\n  return router;\n};","map":{"version":3,"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","express","require","_","pluralize","write","getFullURL","utils","delay","module","exports","db","name","opts","router","Router","use","embed","resource","e","concat","externalResource","get","query","singularResource","singular","foreignKeySuffix","id","expand","innerResource","plural","prop","getById","list","req","res","next","chain","q","_start","_end","_page","_sort","_order","_limit","_embed","_expand","arr","has","test","Array","isArray","toLowerCase","deepQuery","isDifferent","isRange","isLike","path","replace","element","map","elementValue","undefined","isLowerThan","toString","RegExp","reduce","a","b","_sortSet","split","_orderSet","s","orderBy","setHeader","size","parseInt","page","getPage","links","fullURL","first","current","prev","last","items","slice","cloneDeep","locals","data","show","params","clone","create","_isFake","createId","body","insert","location","status","update","method","updateById","replaceById","destroy","removeById","removable","getRemovable","getState","item","w","route","post","put","patch","delete"],"sources":["C:/FullStackMooc/osa6/redux-anecdotes/node_modules/json-server/lib/server/router/plural.js"],"sourcesContent":["\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst express = require('express');\n\nconst _ = require('lodash');\n\nconst pluralize = require('pluralize');\n\nconst write = require('./write');\n\nconst getFullURL = require('./get-full-url');\n\nconst utils = require('../utils');\n\nconst delay = require('./delay');\n\nmodule.exports = (db, name, opts) => {\n  // Create router\n  const router = express.Router();\n  router.use(delay); // Embed function used in GET /name and GET /name/id\n\n  function embed(resource, e) {\n    e && [].concat(e).forEach(externalResource => {\n      if (db.get(externalResource).value) {\n        const query = {};\n        const singularResource = pluralize.singular(name);\n        query[`${singularResource}${opts.foreignKeySuffix}`] = resource.id;\n        resource[externalResource] = db.get(externalResource).filter(query).value();\n      }\n    });\n  } // Expand function used in GET /name and GET /name/id\n\n\n  function expand(resource, e) {\n    e && [].concat(e).forEach(innerResource => {\n      const plural = pluralize(innerResource);\n\n      if (db.get(plural).value()) {\n        const prop = `${innerResource}${opts.foreignKeySuffix}`;\n        resource[innerResource] = db.get(plural).getById(resource[prop]).value();\n      }\n    });\n  } // GET /name\n  // GET /name?q=\n  // GET /name?attr=&attr=\n  // GET /name?_end=&\n  // GET /name?_start=&_end=&\n  // GET /name?_embed=&_expand=\n\n\n  function list(req, res, next) {\n    // Resource chain\n    let chain = db.get(name); // Remove q, _start, _end, ... from req.query to avoid filtering using those\n    // parameters\n\n    let q = req.query.q;\n    let _start = req.query._start;\n    let _end = req.query._end;\n    let _page = req.query._page;\n    const _sort = req.query._sort;\n    const _order = req.query._order;\n    let _limit = req.query._limit;\n    const _embed = req.query._embed;\n    const _expand = req.query._expand;\n    delete req.query.q;\n    delete req.query._start;\n    delete req.query._end;\n    delete req.query._sort;\n    delete req.query._order;\n    delete req.query._limit;\n    delete req.query._embed;\n    delete req.query._expand; // Automatically delete query parameters that can't be found\n    // in the database\n\n    Object.keys(req.query).forEach(query => {\n      const arr = db.get(name).value();\n\n      for (const i in arr) {\n        if (_.has(arr[i], query) || query === 'callback' || query === '_' || /_lte$/.test(query) || /_gte$/.test(query) || /_ne$/.test(query) || /_like$/.test(query)) return;\n      }\n\n      delete req.query[query];\n    });\n\n    if (q) {\n      // Full-text search\n      if (Array.isArray(q)) {\n        q = q[0];\n      }\n\n      q = q.toLowerCase();\n      chain = chain.filter(obj => {\n        for (const key in obj) {\n          const value = obj[key];\n\n          if (db._.deepQuery(value, q)) {\n            return true;\n          }\n        }\n\n        return false;\n      });\n    }\n\n    Object.keys(req.query).forEach(key => {\n      // Don't take into account JSONP query parameters\n      // jQuery adds a '_' query parameter too\n      if (key !== 'callback' && key !== '_') {\n        // Always use an array, in case req.query is an array\n        const arr = [].concat(req.query[key]);\n        const isDifferent = /_ne$/.test(key);\n        const isRange = /_lte$/.test(key) || /_gte$/.test(key);\n        const isLike = /_like$/.test(key);\n        const path = key.replace(/(_lte|_gte|_ne|_like)$/, '');\n        chain = chain.filter(element => {\n          return arr.map(function (value) {\n            // get item value based on path\n            // i.e post.title -> 'foo'\n            const elementValue = _.get(element, path); // Prevent toString() failing on undefined or null values\n\n\n            if (elementValue === undefined || elementValue === null) {\n              return undefined;\n            }\n\n            if (isRange) {\n              const isLowerThan = /_gte$/.test(key);\n              return isLowerThan ? value <= elementValue : value >= elementValue;\n            } else if (isDifferent) {\n              return value !== elementValue.toString();\n            } else if (isLike) {\n              return new RegExp(value, 'i').test(elementValue.toString());\n            } else {\n              return value === elementValue.toString();\n            }\n          }).reduce((a, b) => isDifferent ? a && b : a || b);\n        });\n      }\n    }); // Sort\n\n    if (_sort) {\n      const _sortSet = _sort.split(',');\n\n      const _orderSet = (_order || '').split(',').map(s => s.toLowerCase());\n\n      chain = chain.orderBy(_sortSet, _orderSet);\n    } // Slice result\n\n\n    if (_end || _limit || _page) {\n      res.setHeader('X-Total-Count', chain.size());\n      res.setHeader('Access-Control-Expose-Headers', `X-Total-Count${_page ? ', Link' : ''}`);\n    }\n\n    if (_page) {\n      _page = parseInt(_page, 10);\n      _page = _page >= 1 ? _page : 1;\n      _limit = parseInt(_limit, 10) || 10;\n      const page = utils.getPage(chain.value(), _page, _limit);\n      const links = {};\n      const fullURL = getFullURL(req);\n\n      if (page.first) {\n        links.first = fullURL.replace(`page=${page.current}`, `page=${page.first}`);\n      }\n\n      if (page.prev) {\n        links.prev = fullURL.replace(`page=${page.current}`, `page=${page.prev}`);\n      }\n\n      if (page.next) {\n        links.next = fullURL.replace(`page=${page.current}`, `page=${page.next}`);\n      }\n\n      if (page.last) {\n        links.last = fullURL.replace(`page=${page.current}`, `page=${page.last}`);\n      }\n\n      res.links(links);\n      chain = _.chain(page.items);\n    } else if (_end) {\n      _start = parseInt(_start, 10) || 0;\n      _end = parseInt(_end, 10);\n      chain = chain.slice(_start, _end);\n    } else if (_limit) {\n      _start = parseInt(_start, 10) || 0;\n      _limit = parseInt(_limit, 10);\n      chain = chain.slice(_start, _start + _limit);\n    } // embed and expand\n\n\n    chain = chain.cloneDeep().forEach(function (element) {\n      embed(element, _embed);\n      expand(element, _expand);\n    });\n    res.locals.data = chain.value();\n    next();\n  } // GET /name/:id\n  // GET /name/:id?_embed=&_expand\n\n\n  function show(req, res, next) {\n    const _embed = req.query._embed;\n    const _expand = req.query._expand;\n    const resource = db.get(name).getById(req.params.id).value();\n\n    if (resource) {\n      // Clone resource to avoid making changes to the underlying object\n      const clone = _.cloneDeep(resource); // Embed other resources based on resource id\n      // /posts/1?_embed=comments\n\n\n      embed(clone, _embed); // Expand inner resources based on id\n      // /posts/1?_expand=user\n\n      expand(clone, _expand);\n      res.locals.data = clone;\n    }\n\n    next();\n  } // POST /name\n\n\n  function create(req, res, next) {\n    let resource;\n\n    if (opts._isFake) {\n      const id = db.get(name).createId().value();\n      resource = _objectSpread(_objectSpread({}, req.body), {}, {\n        id\n      });\n    } else {\n      resource = db.get(name).insert(req.body).value();\n    }\n\n    res.setHeader('Access-Control-Expose-Headers', 'Location');\n    res.location(`${getFullURL(req)}/${resource.id}`);\n    res.status(201);\n    res.locals.data = resource;\n    next();\n  } // PUT /name/:id\n  // PATCH /name/:id\n\n\n  function update(req, res, next) {\n    const id = req.params.id;\n    let resource;\n\n    if (opts._isFake) {\n      resource = db.get(name).getById(id).value();\n\n      if (req.method === 'PATCH') {\n        resource = _objectSpread(_objectSpread({}, resource), req.body);\n      } else {\n        resource = _objectSpread(_objectSpread({}, req.body), {}, {\n          id: resource.id\n        });\n      }\n    } else {\n      let chain = db.get(name);\n      chain = req.method === 'PATCH' ? chain.updateById(id, req.body) : chain.replaceById(id, req.body);\n      resource = chain.value();\n    }\n\n    if (resource) {\n      res.locals.data = resource;\n    }\n\n    next();\n  } // DELETE /name/:id\n\n\n  function destroy(req, res, next) {\n    let resource;\n\n    if (opts._isFake) {\n      resource = db.get(name).value();\n    } else {\n      resource = db.get(name).removeById(req.params.id).value(); // Remove dependents documents\n\n      const removable = db._.getRemovable(db.getState(), opts);\n\n      removable.forEach(item => {\n        db.get(item.name).removeById(item.id).value();\n      });\n    }\n\n    if (resource) {\n      res.locals.data = {};\n    }\n\n    next();\n  }\n\n  const w = write(db);\n  router.route('/').get(list).post(create, w);\n  router.route('/:id').get(show).put(update, w).patch(update, w).delete(destroy, w);\n  return router;\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}