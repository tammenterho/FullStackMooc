{"ast":null,"code":"import _slicedToArray from\"C:/FullStackMooc/osa3/puhelinluettelo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import personService from'./services/persons';import'./index.css';// 2.15 tähtitehtävä puuttuu\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Notification=function Notification(_ref){var message=_ref.message;if(message===null){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"error \".concat(message?'show':''),children:message});};var Numbers=function Numbers(_ref2){var filteredPersons=_ref2.filteredPersons,setPersons=_ref2.setPersons,persons=_ref2.persons;var handleDelete=function handleDelete(id){console.log('Yritetään poistaa',id);personService.remove(id).then(function(response){setPersons(persons.filter(function(person){return person.id!==id;}));});console.log('poistettu',id);};return/*#__PURE__*/_jsx(\"div\",{children:filteredPersons.map(function(person){return/*#__PURE__*/_jsxs(\"p\",{children:[\"ID: \",person.id,\" Nimi: \",person.name,\" Numero: \",person.number,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(person.id);},children:\"Delete\"})]},person.name);})});};var Etsi=function Etsi(_ref3){var persons=_ref3.persons,setPersons=_ref3.setPersons;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),filtteri=_useState2[0],setNewFiltteri=_useState2[1];var handleFilter=function handleFilter(event){setNewFiltteri(event.target.value);};var filteredPersons=persons.filter(function(person){return person.name.toLowerCase().includes(filtteri.toLowerCase());});return/*#__PURE__*/_jsxs(\"div\",{children:[\"etsi: \",/*#__PURE__*/_jsx(\"input\",{value:filtteri,onChange:handleFilter}),/*#__PURE__*/_jsx(Numbers,{filteredPersons:filteredPersons,setPersons:setPersons,persons:persons})]});};var App=function App(){var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),persons=_useState4[0],setPersons=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newName=_useState6[0],setNewName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newNumber=_useState8[0],setNewNumber=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];var handleChange=function handleChange(event){setNewName(event.target.value);};var handleChangeNum=function handleChangeNum(event){setNewNumber(event.target.value);};var addPerson=function addPerson(event){event.preventDefault();var personObject={name:newName,number:newNumber};if(persons.some(function(person){return person.name===personObject.name;})){alert(\"\".concat(newName,\" is already in phonebook\"));// nämä on backtickejä eikä lainausmerkkejä\nconsole.log('popup nyt');}else{setPersons(persons.concat(personObject));console.log('lisätty ',personObject);console.log('lista',persons);setErrorMessage(\"Contact '\".concat(newName,\"' succesfully added!\"));setTimeout(function(){setErrorMessage(null);},5000);personService// pitää olla addPerson sisällä\n.create(personObject).then(function(response){setPersons(persons.concat(response.data));setNewName('');setNewNumber('');});}};// tämä app sisällä vaan koska suoritetaan heti kun käynnistetään\nuseEffect(function(){console.log('effect');personService.getAll().then(function(response){setPersons(response.data);console.log('nämä tulee getAll kutsulla palvelimelta = response.data',response.data);});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:errorMessage}),/*#__PURE__*/_jsx(\"h3\",{children:\"Add a new\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{value:newName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"number: \",/*#__PURE__*/_jsx(\"input\",{value:newNumber,onChange:handleChangeNum})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:addPerson,type:\"submit\",children:\"add\"})})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Etsi,{persons:persons,setPersons:setPersons})]});};export default App;","map":{"version":3,"names":["useEffect","useState","personService","jsx","_jsx","jsxs","_jsxs","Notification","_ref","message","className","concat","children","Numbers","_ref2","filteredPersons","setPersons","persons","handleDelete","id","console","log","remove","then","response","filter","person","map","name","number","onClick","Etsi","_ref3","_useState","_useState2","_slicedToArray","filtteri","setNewFiltteri","handleFilter","event","target","value","toLowerCase","includes","onChange","App","_useState3","_useState4","_useState5","_useState6","newName","setNewName","_useState7","_useState8","newNumber","setNewNumber","_useState9","_useState10","errorMessage","setErrorMessage","handleChange","handleChangeNum","addPerson","preventDefault","personObject","some","alert","setTimeout","create","data","getAll","type"],"sources":["C:/FullStackMooc/osa3/puhelinluettelo/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport personService from './services/persons'\nimport './index.css'\n\n// 2.15 tähtitehtävä puuttuu\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className={`error ${message ? 'show' : ''}`}>\n      {message}\n    </div>\n  )\n}\n\nconst Numbers = ({ filteredPersons, setPersons, persons }) => {\n\n  const handleDelete = (id) => {\n    console.log('Yritetään poistaa', id)\n    personService\n    .remove(id)\n    .then(response => {\n      setPersons(persons.filter(person => person.id !== id))\n    })\n    console.log('poistettu', id)\n  }\n\n  return (\n    <div>\n      {filteredPersons.map(person =>\n        <p key={person.name}>ID: {person.id} Nimi: {person.name} Numero: {person.number}\n        <button onClick={() => handleDelete(person.id)}>Delete</button>\n        </p>\n      )}\n    </div>\n  )\n}\n\nconst Etsi = ({ persons, setPersons }) => {\n\n  const [filtteri, setNewFiltteri] = useState('')\n  const handleFilter = (event) => {\n    setNewFiltteri(event.target.value)\n  }\n\n  const filteredPersons = persons.filter(person => person.name.toLowerCase().includes(filtteri.toLowerCase()))\n\n\n  return (\n    <div>\n      etsi: <input value={filtteri} onChange={handleFilter} />\n      <Numbers filteredPersons={filteredPersons} setPersons={setPersons} persons={persons} />\n    </div>\n    \n  )\n}\n\n\n\n\n\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [errorMessage, setErrorMessage] = useState('')\n \n\n  \n\n  const handleChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleChangeNum = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if (persons.some(person => person.name === personObject.name)) {\n      alert(`${newName} is already in phonebook`) // nämä on backtickejä eikä lainausmerkkejä\n      console.log('popup nyt')\n    } else {\n\n\n      setPersons(persons.concat(personObject))\n      console.log('lisätty ', personObject)\n      console.log('lista', persons)\n\n      setErrorMessage(\n        `Contact '${newName}' succesfully added!`\n      )\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n\n\n      personService // pitää olla addPerson sisällä\n        .create(personObject)\n        .then(response => {\n          setPersons(persons.concat(response.data))\n          setNewName('')\n          setNewNumber('')\n        })\n    }\n  }\n\n  // tämä app sisällä vaan koska suoritetaan heti kun käynnistetään\n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n        console.log('nämä tulee getAll kutsulla palvelimelta = response.data', response.data)\n      })\n  }, [])\n\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <h3>Add a new</h3>\n      <form>\n        <div>\n          name: <input value={newName} onChange={handleChange} />\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleChangeNum} />\n        </div>\n        <div>\n          <button onClick={addPerson} type=\"submit\">add</button>\n        </div>\n      </form>\n      <h3>Numbers</h3>\n      <Etsi persons={persons} setPersons={setPersons}/>\n    </div>\n  )\n\n}\n\nexport default App"],"mappings":"2HAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,aAAa,KAAM,oBAAoB,CAC9C,MAAO,aAAa,CAEpB;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEA,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAAC,IAAA,CAAoB,IAAd,CAAAC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CAC7B,GAAIA,OAAO,GAAK,IAAI,CAAE,CACpB,MAAO,KAAI,CACb,CAEA,mBACEL,IAAA,QAAKM,SAAS,UAAAC,MAAA,CAAWF,OAAO,CAAG,MAAM,CAAG,EAAE,CAAG,CAAAG,QAAA,CAC9CH,OAAO,EACJ,CAEV,CAAC,CAED,GAAM,CAAAI,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAAC,KAAA,CAAiD,IAA3C,CAAAC,eAAe,CAAAD,KAAA,CAAfC,eAAe,CAAEC,UAAU,CAAAF,KAAA,CAAVE,UAAU,CAAEC,OAAO,CAAAH,KAAA,CAAPG,OAAO,CAErD,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,EAAE,CAAK,CAC3BC,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEF,EAAE,CAAC,CACpCjB,aAAa,CACZoB,MAAM,CAACH,EAAE,CAAC,CACVI,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChBR,UAAU,CAACC,OAAO,CAACQ,MAAM,CAAC,SAAAC,MAAM,QAAI,CAAAA,MAAM,CAACP,EAAE,GAAKA,EAAE,GAAC,CAAC,CACxD,CAAC,CAAC,CACFC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEF,EAAE,CAAC,CAC9B,CAAC,CAED,mBACEf,IAAA,QAAAQ,QAAA,CACGG,eAAe,CAACY,GAAG,CAAC,SAAAD,MAAM,qBACzBpB,KAAA,MAAAM,QAAA,EAAqB,MAAI,CAACc,MAAM,CAACP,EAAE,CAAC,SAAO,CAACO,MAAM,CAACE,IAAI,CAAC,WAAS,CAACF,MAAM,CAACG,MAAM,cAC/EzB,IAAA,WAAQ0B,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAZ,YAAY,CAACQ,MAAM,CAACP,EAAE,CAAC,EAAC,CAAAP,QAAA,CAAC,QAAM,EAAS,GADvDc,MAAM,CAACE,IAAI,CAEf,GACL,EACG,CAEV,CAAC,CAED,GAAM,CAAAG,IAAI,CAAG,QAAP,CAAAA,IAAIA,CAAAC,KAAA,CAAgC,IAA1B,CAAAf,OAAO,CAAAe,KAAA,CAAPf,OAAO,CAAED,UAAU,CAAAgB,KAAA,CAAVhB,UAAU,CAEjC,IAAAiB,SAAA,CAAmChC,QAAQ,CAAC,EAAE,CAAC,CAAAiC,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAxCG,QAAQ,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAC/B,GAAM,CAAAI,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAAK,CAAK,CAC9BF,cAAc,CAACE,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACpC,CAAC,CAED,GAAM,CAAA1B,eAAe,CAAGE,OAAO,CAACQ,MAAM,CAAC,SAAAC,MAAM,QAAI,CAAAA,MAAM,CAACE,IAAI,CAACc,WAAW,EAAE,CAACC,QAAQ,CAACP,QAAQ,CAACM,WAAW,EAAE,CAAC,GAAC,CAG5G,mBACEpC,KAAA,QAAAM,QAAA,EAAK,QACG,cAAAR,IAAA,UAAOqC,KAAK,CAAEL,QAAS,CAACQ,QAAQ,CAAEN,YAAa,EAAG,cACxDlC,IAAA,CAACS,OAAO,EAACE,eAAe,CAAEA,eAAgB,CAACC,UAAU,CAAEA,UAAW,CAACC,OAAO,CAAEA,OAAQ,EAAG,GACnF,CAGV,CAAC,CAQD,GAAM,CAAA4B,GAAG,CAAG,QAAN,CAAAA,GAAGA,CAAA,CAAS,CAChB,IAAAC,UAAA,CAA8B7C,QAAQ,CAAC,EAAE,CAAC,CAAA8C,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAnC7B,OAAO,CAAA8B,UAAA,IAAE/B,UAAU,CAAA+B,UAAA,IAC1B,IAAAC,UAAA,CAA8B/C,QAAQ,CAAC,EAAE,CAAC,CAAAgD,UAAA,CAAAd,cAAA,CAAAa,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAAkCnD,QAAQ,CAAC,EAAE,CAAC,CAAAoD,UAAA,CAAAlB,cAAA,CAAAiB,UAAA,IAAvCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAC9B,IAAAG,UAAA,CAAwCvD,QAAQ,CAAC,EAAE,CAAC,CAAAwD,WAAA,CAAAtB,cAAA,CAAAqB,UAAA,IAA7CE,YAAY,CAAAD,WAAA,IAAEE,eAAe,CAAAF,WAAA,IAKpC,GAAM,CAAAG,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIrB,KAAK,CAAK,CAC9BY,UAAU,CAACZ,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAChC,CAAC,CACD,GAAM,CAAAoB,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAItB,KAAK,CAAK,CACjCgB,YAAY,CAAChB,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAClC,CAAC,CAED,GAAM,CAAAqB,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAIvB,KAAK,CAAK,CAC3BA,KAAK,CAACwB,cAAc,EAAE,CACtB,GAAM,CAAAC,YAAY,CAAG,CACnBpC,IAAI,CAAEsB,OAAO,CACbrB,MAAM,CAAEyB,SACV,CAAC,CAED,GAAIrC,OAAO,CAACgD,IAAI,CAAC,SAAAvC,MAAM,QAAI,CAAAA,MAAM,CAACE,IAAI,GAAKoC,YAAY,CAACpC,IAAI,GAAC,CAAE,CAC7DsC,KAAK,IAAAvD,MAAA,CAAIuC,OAAO,6BAA2B,CAAC;AAC5C9B,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC,CAC1B,CAAC,IAAM,CAGLL,UAAU,CAACC,OAAO,CAACN,MAAM,CAACqD,YAAY,CAAC,CAAC,CACxC5C,OAAO,CAACC,GAAG,CAAC,UAAU,CAAE2C,YAAY,CAAC,CACrC5C,OAAO,CAACC,GAAG,CAAC,OAAO,CAAEJ,OAAO,CAAC,CAE7B0C,eAAe,aAAAhD,MAAA,CACDuC,OAAO,yBACpB,CACDiB,UAAU,CAAC,UAAM,CACfR,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAAE,IAAI,CAAC,CAGRzD,aAAc;AAAA,CACXkE,MAAM,CAACJ,YAAY,CAAC,CACpBzC,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChBR,UAAU,CAACC,OAAO,CAACN,MAAM,CAACa,QAAQ,CAAC6C,IAAI,CAAC,CAAC,CACzClB,UAAU,CAAC,EAAE,CAAC,CACdI,YAAY,CAAC,EAAE,CAAC,CAClB,CAAC,CAAC,CACN,CACF,CAAC,CAED;AACAvD,SAAS,CAAC,UAAM,CACdoB,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,CACrBnB,aAAa,CACVoE,MAAM,EAAE,CACR/C,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChBR,UAAU,CAACQ,QAAQ,CAAC6C,IAAI,CAAC,CACzBjD,OAAO,CAACC,GAAG,CAAC,yDAAyD,CAAEG,QAAQ,CAAC6C,IAAI,CAAC,CACvF,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAIN,mBACE/D,KAAA,QAAAM,QAAA,eACER,IAAA,OAAAQ,QAAA,CAAI,WAAS,EAAK,cAClBR,IAAA,CAACG,YAAY,EAACE,OAAO,CAAEiD,YAAa,EAAG,cACvCtD,IAAA,OAAAQ,QAAA,CAAI,WAAS,EAAK,cAClBN,KAAA,SAAAM,QAAA,eACEN,KAAA,QAAAM,QAAA,EAAK,QACG,cAAAR,IAAA,UAAOqC,KAAK,CAAES,OAAQ,CAACN,QAAQ,CAAEgB,YAAa,EAAG,GACnD,cACNtD,KAAA,QAAAM,QAAA,EAAK,UACK,cAAAR,IAAA,UAAOqC,KAAK,CAAEa,SAAU,CAACV,QAAQ,CAAEiB,eAAgB,EAAG,GAC1D,cACNzD,IAAA,QAAAQ,QAAA,cACER,IAAA,WAAQ0B,OAAO,CAAEgC,SAAU,CAACS,IAAI,CAAC,QAAQ,CAAA3D,QAAA,CAAC,KAAG,EAAS,EAClD,GACD,cACPR,IAAA,OAAAQ,QAAA,CAAI,SAAO,EAAK,cAChBR,IAAA,CAAC2B,IAAI,EAACd,OAAO,CAAEA,OAAQ,CAACD,UAAU,CAAEA,UAAW,EAAE,GAC7C,CAGV,CAAC,CAED,cAAe,CAAA6B,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}